
DROP TABLE IF EXISTS `user`;
CREATE TABLE IF NOT EXISTS `user` (
                                        `id` int(10) NOT NULL auto_increment,
                                        `nom` varchar(25) NOT NULL,
                                        `prenom` varchar(25) NOT NULL,
                                        `telephone` varchar(25) NOT NULL,
                                        `email` varchar(50) NOT NULL,
                                        `adresse1` varchar(25) NOT NULL,
                                        `adresse2` varchar(25),
                                        `ville` varchar(25) NOT NULL,
                                        `cp` varchar(25) NOT NULL,
                                        PRIMARY KEY (id))ENGINE = innodb;



DROP TABLE IF EXISTS `admin`;
CREATE TABLE IF NOT EXISTS `admin` (
                                         `id` int(10) NOT NULL,
                                         PRIMARY KEY (id),
                                         FOREIGN KEY (id) REFERENCES user(id))ENGINE = innodb;

DROP TABLE IF EXISTS `promotion`;
CREATE TABLE IF NOT EXISTS `promotion` (
                                         `id` int(10) NOT NULL auto_increment,

                                         `formation` int(10) NOT NULL,
                                         `grade` int(10) NOT NULL,
                                         PRIMARY KEY (id)) ENGINE = innodb;
DROP TABLE IF EXISTS `student`;
CREATE TABLE IF NOT EXISTS `student` (
                                        `id` int(10) NOT NULL,
                                        `INE` int(10) NOT NULL,
                                        `id_promotion` int(10) NOT NULL,
                                        PRIMARY KEY (id),
                                        FOREIGN KEY (id) REFERENCES user(id),
                                        FOREIGN KEY (id_promotion) REFERENCES  promotion(id)) ENGINE = innodb;

DROP TABLE IF EXISTS `teacher`;
CREATE TABLE IF NOT EXISTS `teacher` (
                                        `id` int(10) NOT NULL,
                                        `NUMEN` varchar(26) NOT NULL,
                                        PRIMARY KEY (id),
                                        FOREIGN KEY (id) REFERENCES user(id))ENGINE = innodb;


DROP TABLE IF EXISTS `activity`;
CREATE TABLE IF NOT EXISTS `activity` (
                                         `id` int(10) NOT NULL auto_increment,
                                         `name` varchar(26) NOT NULL,
                                         `start_date` DATETIME NOT NULL,
                                         `end_date` DATETIME NOT NULL,
                                         `subject` varchar(25) NOT NULL,
                                         `id_promotion` int(10) NOT NULL,
                                         `id_teacher` int(10) NOT NULL,
                                         PRIMARY KEY (id),
                                         FOREIGN KEY (id_promotion) REFERENCES promotion(id),
                                         FOREIGN KEY (id_teacher) REFERENCES teacher(id))ENGINE = innodb;

DROP TABLE IF EXISTS `graduation`;
CREATE TABLE IF NOT EXISTS `graduation` (
                                          `id_student` int(10) NOT NULL,
                                          `id_activity` int(10) NOT NULL,
                                          `grade` int NOT NULL,
                                          PRIMARY KEY (id_student,id_activity),
                                          FOREIGN KEY (id_student) REFERENCES student(id),
                                          FOREIGN KEY (id_activity) REFERENCES activity(id))ENGINE = innodb;

DROP TABLE IF EXISTS `lesson`;
CREATE TABLE IF NOT EXISTS `lesson` (
                                            `id` int(10) NOT NULL auto_increment,
                                            `filePath` VARCHAR(500) NOT NULL,
                                            `id_activity` int NOT NULL,
                                            PRIMARY KEY (id),
                                            FOREIGN KEY (id_activity) REFERENCES activity(id))ENGINE = innodb;

DROP TABLE IF EXISTS `exercise`;
CREATE TABLE IF NOT EXISTS `exercise` (
                                        `id` int(10) NOT NULL auto_increment,
                                        `filePath` VARCHAR(500) NOT NULL,
                                        `id_activity` int NOT NULL,
                                        PRIMARY KEY (id),
                                        FOREIGN KEY (id_activity) REFERENCES activity(id))ENGINE = innodb;
